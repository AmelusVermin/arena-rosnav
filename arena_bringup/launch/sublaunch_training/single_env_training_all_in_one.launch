<launch>
    <arg name="ns" />

    <arg name="map_path" value="$(find simulator_setup)/maps/random_map/map.yaml"/>
    <arg name="global_frame_id"   value="map"/>
    <arg name="odom_frame_id"     value="$(arg ns)_odom"/>
    <arg name="base_frame_id"     value="$(arg ns)_footprint"/>

    <!-- use fake localization-->
    <include file="$(find arena_bringup)/launch/sublaunch_training/fake_localization.launch">
      <arg name="ns"                value="$(arg ns)"/>
      <arg name="global_frame_id"   value="$(arg global_frame_id)"/>
      <arg name="odom_frame_id"     value="$(arg odom_frame_id)"/>
    </include>

    <!-- use simulator and rviz-->
    <include file="$(find arena_bringup)/launch/sublaunch_training/flatland_simulator.launch">
        <arg name="ns" value="$(arg ns)"/>
    </include>

    <!-- start map generator node -->
    <node pkg="simulator_setup" name="map_generator_node" type="map_generator_node.py" ns="$(arg ns)">
      <param name="ns" value="$(arg ns)" />
      <remap from="/clock" to="/$(arg ns)/clock"/>
    </node>

    <!-- map server-->
    <node name="map_server" pkg="map_server" type="map_server" args="$(arg map_path)" ns="$(arg ns)">
      <!-- In multi-env training /clock not available, since we only want one map_server, it's clock topic is remapped to /clock -->
      <remap from="/clock" to="/$(arg ns)/clock"/>
    </node>


  </launch>
